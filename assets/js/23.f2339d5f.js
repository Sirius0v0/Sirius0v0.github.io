(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{491:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ubuntu离线安装包的方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu离线安装包的方法"}},[s._v("#")]),s._v(" Ubuntu离线安装包的方法")]),s._v(" "),a("blockquote",[a("p",[s._v("步骤概要如下：")]),s._v(" "),a("p",[s._v("1、准备网络正常的环境(B)，且操作系统版本与离线环境(A)一致；")]),s._v(" "),a("p",[s._v("2、用apt-get在环境B上下载需要安装的包，并用dpkg-scanpackages依赖打包；")]),s._v(" "),a("p",[s._v("3、将打好的依赖包传到环境A上；")]),s._v(" "),a("p",[s._v("4、更新环境A的apt-get源，并清空apt缓存；")]),s._v(" "),a("p",[s._v("5、环境A上用apt-get安装软件。")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("演示Ubuntu版本：22.04，其他版本类似")])]),s._v(" "),a("ol",[a("li",[s._v("在环境B上创建离线源存放目录："),a("code",[s._v("~/offline-packages")]),s._v("，并进入目录下载所需安装包："),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p ~/offline-packages\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/offline-packages\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以gcc为例下载安装包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" download "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-cache")]),s._v(" depends --recurse --no-recommends --no-suggests --no-conflicts --no-breaks --no-replaces --no-enhances gcc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^\\w"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -u"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])])])]),s._v(" "),a("li",[s._v("打包依赖包"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("dpkg-scanpackages "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" -9c "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Packages.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zcf packages.tar.gz ./*\n")])])]),a("code",[s._v("packages.tar.gz")]),s._v("就是制作好的离线包")]),s._v(" "),a("li",[s._v("上传并建立离线源"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建离线文件存放目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /opt/offline-packages\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压离线文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf packages.tar.gz -C /opt/offline-packages/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份源文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/apt/sources.list /etc/apt/sources.list.bak\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 映射本地源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("/etc/apt/sources.list "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\ndeb [trusted=yes] file:///opt/offline-packages ./\nEOF")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])])])]),s._v(" "),a("li",[s._v("在环境A中用apt-get安装软件")])])])}),[],!1,null,null,null);t.default=e.exports}}]);